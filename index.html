<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MateTap</title>

<style>
body{
margin:0;
background: radial-gradient(circle at top,#1e3c2a,#0f1f16);
font-family:Arial,Helvetica,sans-serif;
color:white;
text-align:center;
overflow-x:hidden;
}

h1{
margin-top:20px;
font-size:32px;
}

#coin{
width:180px;
cursor:pointer;
transition:transform .08s;
}

#coin:active{
transform:scale(.9);
}

.counter{
font-size:28px;
margin:15px;
}

.btn{
background:#00ff88;
border:none;
padding:12px 20px;
border-radius:12px;
font-weight:bold;
cursor:pointer;
margin:6px;
}

.panel{
background:rgba(255,255,255,0.08);
padding:15px;
margin:15px;
border-radius:15px;
}

.float{
position:absolute;
font-weight:bold;
color:#00ff88;
animation:floatUp 1s ease-out forwards;
}

@keyframes floatUp{
0%{opacity:1;transform:translateY(0);}
100%{opacity:0;transform:translateY(-80px);}
}

.rankItem{
display:flex;
justify-content:space-between;
margin:6px 0;
}

</style>
</head>
<body>

<h1>游븰 MateTap</h1>

<div class="counter">
<span id="score">0</span> mates
</div>

<img id="coin" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA+7+0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QgIECMJm2uVHAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAASSURBVHja7cEBDQAAAMKg909tDjegAAAAAAAAAAAAAAAAgK8G3QAAAWoX8JkAAAAASUVORK5CYII=">

<div>
<button class="btn" onclick="openMissions()">游꿢 Misiones</button>
<button class="btn" onclick="openRanking()">游끥 Ranking</button>
<button class="btn" onclick="openRef()">游논 Referidos</button>
</div>

<div id="panel" class="panel" style="display:none;"></div>

<audio id="tapSound">
<source src="data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAA..." type="audio/mp3">
</audio>

<script>

let score = 0
let lastTap = 0
let tapCountSecond = 0
let referCode = localStorage.getItem("ref") || generateRef()
let missions = JSON.parse(localStorage.getItem("missions")) || {daily:0,done:false}

document.getElementById("score").innerText = score

const coin = document.getElementById("coin")

coin.addEventListener("click", e=>{
let now = Date.now()

// ANTI TRAMPAS
if(now-lastTap < 50){
alert("丘멆잺 Trampa detectada")
return
}

lastTap = now

score++
document.getElementById("score").innerText = score
document.getElementById("tapSound").play()

floatEffect(e.pageX,e.pageY)

saveLocal()
})

function floatEffect(x,y){
let el = document.createElement("div")
el.className="float"
el.innerText="+1"
el.style.left=x+"px"
el.style.top=y+"px"
document.body.appendChild(el)
setTimeout(()=>el.remove(),1000)
}

function openMissions(){
let p = document.getElementById("panel")
p.style.display="block"
p.innerHTML=`
<h3>游꿢 Misi칩n diaria</h3>
<p>Haz 50 mates</p>
<p>Progreso: ${score}/50</p>
<button class="btn" onclick="claimMission()">Reclamar</button>
`
}

function claimMission(){
if(score>=50 && !missions.done){
score+=100
missions.done=true
alert("游꿀 +100 Bonus!")
saveLocal()
}
}

function openRanking(){
let p=document.getElementById("panel")
p.style.display="block"
p.innerHTML="<h3>游끥 Ranking Global</h3><div id='rank'></div>"
loadRanking()
}

function loadRanking(){
let fakeRank=[
{name:"Jugador1",score:2000},
{name:"Jugador2",score:1500},
{name:"Marco",score:score}
]

fakeRank.sort((a,b)=>b.score-a.score)

let html=""
fakeRank.forEach((u,i)=>{
html+=`<div class="rankItem"><span>#${i+1} ${u.name}</span><span>${u.score}</span></div>`
})
document.getElementById("rank").innerHTML=html
}

function openRef(){
let p=document.getElementById("panel")
p.style.display="block"
p.innerHTML=`
<h3>游논 Referidos</h3>
<p>Tu c칩digo:</p>
<h2>${referCode}</h2>
<p>Comparte tu link:</p>
<p>?ref=${referCode}</p>
`
}

function generateRef(){
let code="MATE"+Math.floor(Math.random()*9999)
localStorage.setItem("ref",code)
return code
}

function saveLocal(){
localStorage.setItem("score",score)
localStorage.setItem("missions",JSON.stringify(missions))
}

score = parseInt(localStorage.getItem("score")) || 0
document.getElementById("score").innerText = score

</script>

</body>
</html>
